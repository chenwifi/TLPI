]0;root@localhost:~/TLPI/program64[?1034h[root@localhost program64]# tty
/dev/pts/2
]0;root@localhost:~/TLPI/program64[root@localhost program64]# echo $$
28037
]0;root@localhost:~/TLPI/program64[root@localhost program64]# ps -p 28004 -p 28037 -c[KC script -o ""p"i"d" "p"p"i"d" "s"i"d" "t"p"g"i"d" "t"t"y" "c"m"d"
  PID  PPID   SID TPGID TT       CMD
28004 28000 28004 28036 pts/1    -bash
28036 28004 28004 28036 pts/1    ./script
28037 28036 28037 28049 pts/2    /bin/bash
]0;root@localhost:~/TLPI/program64[root@localhost program64]# ls
1-pty_master_open.c  1-pty_master_open.h  2-pty_fork.c  2-pty_fork.h  3-script.c  [0m[01;32mscript[0m  tty_functions.c  tty_functions.h  typescript
]0;root@localhost:~/TLPI/program64[root@localhost program64]# vim 1[Ktypescript [K[K[K[K[K[K[K[K[K[K[K[K[Km 1-pty_master_open.c[Kh[Kc
[?1049h[?1h=[2;1H‚ñΩ[6n[2;1H  [1;1H]11;?[1;32r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[32;1H"1-pty_master_open.c" 50L, 774C[>c[1;1H[33m  1 [m[35m#define _XOPEN_SOURCE [m[31m500[m
[33m  2 [m[35m#include [m[31m<stdio.h>[m
[33m  3 [m[4m[35m#include [m[4m[31m<string.h>[m[4m                                                                                                                 [m[4;1H[33m  4 [m[35m#include [m[31m<stdlib.h>[m
[33m  5 [m[35m#include [m[31m<fcntl.h>[m
[33m  6 [m[35m#include [m[31m<errno.h>[m
[33m  7 
  8 [m[32mint[m ptyMasterOpen([32mchar[m *slaveName,[32msize_t[m snLen){
[33m  9 [m    [32mint[m masterFd,savedErrno;
[33m 10 [m    [32mchar[m *p;
[33m 11 
 12 [m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);
[33m 13 [m    [33mif[m(masterFd == -[31m1[m){
[33m 14 [8Creturn[m -[31m1[m;
[33m 15 [m    }
[33m 16 
 17 [m    [33mif[m(grantpt(masterFd) == -[31m1[m){
[33m 18 [m[8CsavedErrno = errno;
[33m 19 [m[8Cclose(masterFd);
[33m 20 [m[8Cerrno = savedErrno;
[33m 21 
 22 [8Creturn[m -[31m1[m;
[33m 23 [m    }
[33m 24 
 25 [m    [33mif[m(unlockpt(masterFd) == -[31m1[m){
[33m 26 [m[8CsavedErrno = errno;
[33m 27 [m[8Cclose(masterFd);
[33m 28 [m[8Cerrno = savedErrno;
[33m 29 
 30 [8Creturn[m -[31m1[m;
[317m[4190m [m[1m[317m[4190mNORMAL[m[317m[4190m [m[385m[4234m 1-pty_master_open.c                                                                     c [m[3255m[4238m utf-8[unix] [m[317m[4190m   6% [m[1m[317m[4190m‚ò∞    3/50 „èë[m[317m[4190m :  1 [3;5H[?12l[?25hP+q436f\P+q6b75\P+q6b64\P+q6b72\P+q6b6c\P+q2332\P+q2334\P+q2569\P+q2a37\P+q6b31\[?25l[m[2;5H[4m[35m#include [m[4m[31m<stdio.h>[m[4m                                                                                                                  [m[3;5H[35m#include [m[31m<string.h>[m[3;24H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[2;5H[?12l[?25h[?25l[m[1;5H[4m[35m#define _XOPEN_SOURCE [m[4m[31m500[m[4m                                                                                                           [m[2;5H[35m#include [m[31m<stdio.h>[m[2;23H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[1;5H[?12l[?25h[1;5H[1;5H[1;5H[1;5H[?25l[m[35m#define _XOPEN_SOURCE [m[31m500[m[1;30H[K[2;5H[4m[35m#include [m[4m[31m<stdio.h>[m[4m                                                                                                                  [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[2;5H[?12l[?25h[?25l[m[35m#include [m[31m<stdio.h>[m[2;23H[K[3;5H[4m[35m#include [m[4m[31m<string.h>[m[4m                                                                                                                 [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[3;5H[?12l[?25h[?25l[m[35m#include [m[31m<string.h>[m[3;24H[K[4;5H[4m[35m#include [m[4m[31m<stdlib.h>[m[4m                                                                                                                 [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[4;5H[?12l[?25h[?25l[m[35m#include [m[31m<stdlib.h>[m[4;24H[K[5;5H[4m[35m#include [m[4m[31m<fcntl.h>[m[4m                                                                                                                  [m[31;115H[317m[4190m10[m[7C[1m[317m[4190m5/[5;5H[?12l[?25h[?25l[m[35m#include [m[31m<fcntl.h>[m[5;23H[K[6;5H[4m[35m#include [m[4m[31m<errno.h>[m[4m                                                                                                                  [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[6;5H[?12l[?25h[?25l[m[35m#include [m[31m<errno.h>[m[6;23H[K[7;5H[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[7;5H[?12l[?25h[?25l[m[7;5H[K[8;5H[4m[32mint[m[4m ptyMasterOpen([m[4m[32mchar[m[4m *slaveName,[m[4m[32msize_t[m[4m snLen){                                                                                    [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[8;5H[?12l[?25h[?25l[m[32mint[m ptyMasterOpen([32mchar[m *slaveName,[32msize_t[m snLen){[8;53H[K[9;5H[4m    [m[4m[32mint[m[4m masterFd,savedErrno;                                                                                                        [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m4[9;8H[?12l[?25h[?25l[m    [32mint[m masterFd,savedErrno;[9;33H[K[10;5H[4m    [m[4m[32mchar[m[4m *p;                                                                                                                        [m[31;115H[317m[4190m20[m[6C[1m[317m[4190m10/[10;8H[?12l[?25h[?25l[m    [32mchar[m *p;[10;17H[K[11;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[11;5H[?12l[?25h[?25l[m[11;5H[K[12;5H[4m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);                                                                                     [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m4[12;8H[?12l[?25h[?25l[m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);[12;52H[K[13;5H[4m    [m[4m[33mif[m[4m(masterFd == -[m[4m[31m1[m[4m){                                                                                                             [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[13;8H[?12l[?25h[?25l[m[12;5H[4m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);                                                                                     [m[13;5H    [33mif[m(masterFd == -[31m1[m){[13;28H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[12;8H[?12l[?25h[?25l[m[11;5H[4m                                                                                                                                    [m[12;5H    masterFd = posix_openpt(O_RDWR | O_NOCTTY);[12;52H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[11;5H[?12l[?25h[?25l[m[10;5H[4m    [m[4m[32mchar[m[4m *p;                                                                                                                        [m[11;5H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m0/[m[9C[317m[4190m4[10;8H[?12l[?25h[?25l[m[9;5H[4m    [m[4m[32mint[m[4m masterFd,savedErrno;                                                                                                        [m[10;5H    [32mchar[m *p;[10;17H[K[31;115H[317m[4190m18[m[6C[1m[317m[4190m 9/[9;8H[?12l[?25h[?25l[m[8;5H[4m[32mint[m[4m ptyMasterOpen([m[4m[32mchar[m[4m *slaveName,[m[4m[32msize_t[m[4m snLen){                                                                                    [m[9;5H    [32mint[m masterFd,savedErrno;[9;33H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m1[8;5H[?12l[?25h[?25l[m[7;5H[4m                                                                                                                                    [m[8;5H[32mint[m ptyMasterOpen([32mchar[m *slaveName,[32msize_t[m snLen){[8;53H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[7;5H[?12l[?25h[?25l[m[6;5H[4m[35m#include [m[4m[31m<errno.h>[m[4m                                                                                                                  [m[7;5H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[6;5H[?12l[?25h[?25l[m[5;5H[4m[35m#include [m[4m[31m<fcntl.h>[m[4m                                                                                                                  [m[6;5H[35m#include [m[31m<errno.h>[m[6;23H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[5;5H[?12l[?25h[?25l[m[4;5H[4m[35m#include [m[4m[31m<stdlib.h>[m[4m                                                                                                                 [m[5;5H[35m#include [m[31m<fcntl.h>[m[5;23H[K[31;115H[317m[4190m 8[m[7C[1m[317m[4190m4/[4;5H[?12l[?25h[?25l[m[3;5H[4m[35m#include [m[4m[31m<string.h>[m[4m                                                                                                                 [m[4;5H[35m#include [m[31m<stdlib.h>[m[4;24H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[3;5H[?12l[?25h[?25l[m[2;5H[4m[35m#include [m[4m[31m<stdio.h>[m[4m                                                                                                                  [m[3;5H[35m#include [m[31m<string.h>[m[3;24H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[2;5H[?12l[?25h[?25l[m[1;5H[4m[35m#define _XOPEN_SOURCE [m[4m[31m500[m[4m                                                                                                           [m[2;5H[35m#include [m[31m<stdio.h>[m[2;23H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[1;5H[?12l[?25h[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[?25l[m[35m#define _XOPEN_SOURCE [m[31m500[m[1;30H[K[2;5H[4m[35m#include [m[4m[31m<stdio.h>[m[4m                                                                                                                  [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[2;5H[?12l[?25h[?25l[m[35m#include [m[31m<stdio.h>[m[2;23H[K[3;5H[4m[35m#include [m[4m[31m<string.h>[m[4m                                                                                                                 [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[3;5H[?12l[?25h[?25l[m[35m#include [m[31m<string.h>[m[3;24H[K[4;5H[4m[35m#include [m[4m[31m<stdlib.h>[m[4m                                                                                                                 [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[4;5H[?12l[?25h[?25l[m[35m#include [m[31m<stdlib.h>[m[4;24H[K[5;5H[4m[35m#include [m[4m[31m<fcntl.h>[m[4m                                                                                                                  [m[31;115H[317m[4190m10[m[7C[1m[317m[4190m5/[5;5H[?12l[?25h[?25l[m[35m#include [m[31m<fcntl.h>[m[5;23H[K[6;5H[4m[35m#include [m[4m[31m<errno.h>[m[4m                                                                                                                  [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[6;5H[?12l[?25h[?25l[m[35m#include [m[31m<errno.h>[m[6;23H[K[7;5H[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[7;5H[?12l[?25h[?25l[m[7;5H[K[8;5H[4m[32mint[m[4m ptyMasterOpen([m[4m[32mchar[m[4m *slaveName,[m[4m[32msize_t[m[4m snLen){                                                                                    [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[8;5H[?12l[?25h[?25l[m[32mint[m ptyMasterOpen([32mchar[m *slaveName,[32msize_t[m snLen){[8;53H[K[9;5H[4m    [m[4m[32mint[m[4m masterFd,savedErrno;                                                                                                        [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m4[9;8H[?12l[?25h[?25l[m    [32mint[m masterFd,savedErrno;[9;33H[K[10;5H[4m    [m[4m[32mchar[m[4m *p;                                                                                                                        [m[31;115H[317m[4190m20[m[6C[1m[317m[4190m10/[10;8H[?12l[?25h[?25l[m    [32mchar[m *p;[10;17H[K[11;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[11;5H[?12l[?25h[?25l[m[11;5H[K[12;5H[4m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);                                                                                     [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m4[12;8H[?12l[?25h[?25l[m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);[12;52H[K[13;5H[4m    [m[4m[33mif[m[4m(masterFd == -[m[4m[31m1[m[4m){                                                                                                             [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[13;8H[?12l[?25h[?25l[m    [33mif[m(masterFd == -[31m1[m){[13;28H[K[14;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[14;8H[?12l[?25h[?25l[m        [33mreturn[m -[31m1[m;[14;23H[K[15;5H[4m    }                                                                                                                               [m[31;115H[317m[4190m30[m[7C[1m[317m[4190m5/[15;8H[?12l[?25h[?25l[m    }[15;10H[K[16;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[m[9C[317m[4190m1[16;5H[?12l[?25h[?25l[m[16;5H[K[17;5H[4m    [m[4m[33mif[m[4m(grantpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m4[17;8H[?12l[?25h[?25l[m    [33mif[m(grantpt(masterFd) == -[31m1[m){[17;37H[K[18;5H[4m        savedErrno = errno;                                                                                                         [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[18;8H[?12l[?25h[?25l[m        savedErrno = errno;[18;32H[K[19;5H[4m        close(masterFd);                                                                                                            [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[19;8H[?12l[?25h[?25l[m        close(masterFd);[19;29H[K[20;5H[4m        errno = savedErrno;                                                                                                         [m[31;115H[317m[4190m40[m[6C[1m[317m[4190m20/[20;8H[?12l[?25h[?25l[m        errno = savedErrno;[20;32H[K[21;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[21;5H[?12l[?25h[?25l[m[21;5H[K[22;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m4[22;8H[?12l[?25h[?25l[m        [33mreturn[m -[31m1[m;[22;23H[K[23;5H[4m    }                                                                                                                               [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[23;8H[?12l[?25h[?25l[m    }[23;10H[K[24;5H[4m                                                                                                                                    [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[m[9C[317m[4190m1[24;5H[?12l[?25h[?25l[m[24;5H[K[25;5H[4m    [m[4m[33mif[m[4m(unlockpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                   [m[31;115H[317m[4190m50[m[7C[1m[317m[4190m5/[m[9C[317m[4190m4[25;8H[?12l[?25h[?25l[m    [33mif[m(unlockpt(masterFd) == -[31m1[m){[25;38H[K[26;5H[4m        savedErrno = errno;                                                                                                         [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[26;8H[?12l[?25h[?25l[m        savedErrno = errno;[26;32H[K[27;5H[4m        close(masterFd);                                                                                                            [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[27;8H[?12l[?25h[?25l[m        close(masterFd);[27;29H[K[28;5H[4m        errno = savedErrno;                                                                                                         [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[28;8H[?12l[?25h[?25l[m        errno = savedErrno;[28;32H[K[29;5H[4m                                                                                                                                    [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m1[29;5H[?12l[?25h[?25l[m[29;5H[K[30;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;115H[317m[4190m60[m[6C[1m[317m[4190m30/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        [33mreturn[m -[31m1[m;[29;23H[K[30;1H[33m 31 [m[4m    }                                                                                                                               [m[32;1H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[29;10H[K[30;1H[33m 32 [m[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 33 [m[4m    [m[4m[33mif[m[4m((p = ptsname(masterFd)) == [m[4m[31mNULL[m[4m){                                                                                            [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    [33mif[m((p = ptsname(masterFd)) == [31mNULL[m){[29;45H[K[30;1H[33m 34 [m[4m        savedErrno = errno;                                                                                                         [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        savedErrno = errno;[29;32H[K[30;1H[33m 35 [m[4m        close(masterFd);                                                                                                            [m[31;115H[317m[4190m70[m[7C[1m[317m[4190m5/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        close(masterFd);[29;29H[K[30;1H[33m 36 [m[4m        errno = savedErrno;                                                                                                         [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        errno = savedErrno;[29;32H[K[30;1H[33m 37 [m[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 38 [m[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        [33mreturn[m -[31m1[m;[29;23H[K[30;1H[33m 39 [m[4m    }                                                                                                                               [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[29;10H[K[30;1H[33m 40 [m[4m                                                                                                                                    [m[31;115H[317m[4190m80[m[6C[1m[317m[4190m40/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 41 [m[4m    [m[4m[33mif[m[4m(strlen(p) < snLen){                                                                                                          [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    [33mif[m(strlen(p) < snLen){[29;31H[K[30;1H[33m 42 [m[4m        strncpy(slaveName,p,snLen);                                                                                                 [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        strncpy(slaveName,p,snLen);[29;40H[K[30;1H[33m 43 [m[4m    }[m[4m[33melse[m[4m{                                                                                                                          [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[33melse[m{[29;15H[K[30;1H[33m 44 [m[4m        close(masterFd);                                                                                                            [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        close(masterFd);[29;29H[K[30;1H[33m 45 [m[4m        errno = EOVERFLOW;                                                                                                          [m[31;115H[317m[4190m90[m[7C[1m[317m[4190m5/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        errno = EOVERFLOW;[29;31H[K[30;1H[33m 46 [m[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        [33mreturn[m -[31m1[m;[29;23H[K[30;1H[33m 47 [m[4m    }                                                                                                                               [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[29;10H[K[30;1H[33m 48 [m[4m                                                                                                                                    [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 49 [m[4m    [m[4m[33mreturn[m[4m masterFd;                                                                                                                [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    [33mreturn[m masterFd;[29;25H[K[30;1H[33m 50 [m[4m}                                                                                                                                   [m[31;114H[317m[4190m100[m[6C[1m[317m[4190m50/[m[9C[317m[4190m1[30;5H[?12l[?25h[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[?25l[m[29;5H[4m    [m[4m[33mreturn[m[4m masterFd;                                                                                                                [m[30;5H}[30;6H[K[31;114H[317m[4190m 98[m[6C[1m[317m[4190m49/[m[9C[317m[4190m4[29;8H[?12l[?25h[?25l[m[28;5H[4m                                                                                                                                    [m[29;5H    [33mreturn[m masterFd;[29;25H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m1[28;5H[?12l[?25h[?25l[m[27;5H[4m    }                                                                                                                               [m[28;5H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m4[27;8H[?12l[?25h[?25l[m[26;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[27;5H    }[27;10H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[26;8H[?12l[?25h[?25l[m[25;5H[4m        errno = EOVERFLOW;                                                                                                          [m[26;5H        [33mreturn[m -[31m1[m;[26;23H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[25;8H[?12l[?25h[?25l[m[24;5H[4m        close(masterFd);                                                                                                            [m[25;5H        errno = EOVERFLOW;[25;31H[K[31;115H[317m[4190m88[m[7C[1m[317m[4190m4/[24;8H[?12l[?25h[?25l[m[23;5H[4m    }[m[4m[33melse[m[4m{                                                                                                                          [m[24;5H        close(masterFd);[24;29H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[23;8H[?12l[?25h[?25l[m[22;5H[4m        strncpy(slaveName,p,snLen);                                                                                                 [m[23;5H    }[33melse[m{[23;15H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[22;8H[?12l[?25h[?25l[m[21;5H[4m    [m[4m[33mif[m[4m(strlen(p) < snLen){                                                                                                          [m[22;5H        strncpy(slaveName,p,snLen);[22;40H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[21;8H[?12l[?25h[?25l[m[20;5H[4m                                                                                                                                    [m[21;5H    [33mif[m(strlen(p) < snLen){[21;31H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m0/[m[9C[317m[4190m1[20;5H[?12l[?25h[?25l[m[19;5H[4m    }                                                                                                                               [m[20;5H[K[31;115H[317m[4190m78[m[6C[1m[317m[4190m39/[m[9C[317m[4190m4[19;8H[?12l[?25h[?25l[m[18;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[19;5H    }[19;10H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[18;8H[?12l[?25h[?25l[m[17;5H[4m                                                                                                                                    [m[18;5H        [33mreturn[m -[31m1[m;[18;23H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m1[17;5H[?12l[?25h[?25l[m[16;5H[4m        errno = savedErrno;                                                                                                         [m[17;5H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[m[9C[317m[4190m4[16;8H[?12l[?25h[?25l[m[15;5H[4m        close(masterFd);                                                                                                            [m[16;5H        errno = savedErrno;[16;32H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[15;8H[?12l[?25h[?25l[m[14;5H[4m        savedErrno = errno;                                                                                                         [m[15;5H        close(masterFd);[15;29H[K[31;115H[317m[4190m68[m[7C[1m[317m[4190m4/[14;8H[?12l[?25h[?25l[m[13;5H[4m    [m[4m[33mif[m[4m((p = ptsname(masterFd)) == [m[4m[31mNULL[m[4m){                                                                                            [m[14;5H        savedErrno = errno;[14;32H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[13;8H[?12l[?25h[?25l[m[12;5H[4m                                                                                                                                    [m[13;5H    [33mif[m((p = ptsname(masterFd)) == [31mNULL[m){[13;45H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m1[12;5H[?12l[?25h[?25l[m[11;5H[4m    }                                                                                                                               [m[12;5H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m4[11;8H[?12l[?25h[?25l[m[10;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[11;5H    }[11;10H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m0/[10;8H[?12l[?25h[?25l[m[9;5H[4m                                                                                                                                    [m[10;5H        [33mreturn[m -[31m1[m;[10;23H[K[31;115H[317m[4190m58[m[6C[1m[317m[4190m29/[m[9C[317m[4190m1[9;5H[?12l[?25h[?25l[m[8;5H[4m        errno = savedErrno;                                                                                                         [m[9;5H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m4[8;8H[?12l[?25h[?25l[m[7;5H[4m        close(masterFd);                                                                                                            [m[8;5H        errno = savedErrno;[8;32H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[7;8H[?12l[?25h[?25l[m[6;5H[4m        savedErrno = errno;                                                                                                         [m[7;5H        close(masterFd);[7;29H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[6;8H[?12l[?25h[?25l[m[5;5H[4m    [m[4m[33mif[m[4m(unlockpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                   [m[6;5H        savedErrno = errno;[6;32H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[5;8H[?12l[?25h[?25l[m[4;5H[4m                                                                                                                                    [m[5;5H    [33mif[m(unlockpt(masterFd) == -[31m1[m){[5;38H[K[31;115H[317m[4190m48[m[7C[1m[317m[4190m4/[m[9C[317m[4190m1[4;5H[?12l[?25h[?25l[m[3;5H[4m    }                                                                                                                               [m[4;5H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[m[9C[317m[4190m4[3;8H[?12l[?25h[?25l[m[2;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[3;5H    }[3;10H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[2;8H[?12l[?25h[?25l[m[1;5H[4m                                                                                                                                    [m[2;5H        [33mreturn[m -[31m1[m;[2;23H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 20 [m[4m        errno = savedErrno;                                                                                                         [m[2;5H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m0/[m[9C[317m[4190m4[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 19 [m[4m        close(masterFd);                                                                                                            [m[2;5H        errno = savedErrno;[2;32H[K[31;115H[317m[4190m38[m[6C[1m[317m[4190m19/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 18 [m[4m        savedErrno = errno;                                                                                                         [m[2;5H        close(masterFd);[2;29H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 17 [m[4m    [m[4m[33mif[m[4m(grantpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                    [m[2;5H        savedErrno = errno;[2;32H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 16 [m[4m                                                                                                                                    [m[2;5H    [33mif[m(grantpt(masterFd) == -[31m1[m){[2;37H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[m[9C[317m[4190m1[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 15 [m[4m    }                                                                                                                               [m[2;5H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[m[9C[317m[4190m4[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 14 [m[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[2;5H    }[2;10H[K[31;115H[317m[4190m28[m[7C[1m[317m[4190m4/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 13 [m[4m    [m[4m[33mif[m[4m(masterFd == -[m[4m[31m1[m[4m){                                                                                                             [m[2;5H        [33mreturn[m -[31m1[m;[2;23H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 12 [m[4m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);                                                                                     [m[2;5H    [33mif[m(masterFd == -[31m1[m){[2;28H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 11 [m[4m                                                                                                                                    [m[2;5H    masterFd = posix_openpt(O_RDWR | O_NOCTTY);[2;52H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 10 [m[4m    [m[4m[32mchar[m[4m *p;                                                                                                                        [m[2;5H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m0/[m[9C[317m[4190m4[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  9 [m[4m    [m[4m[32mint[m[4m masterFd,savedErrno;                                                                                                        [m[2;5H    [32mchar[m *p;[2;17H[K[31;115H[317m[4190m18[m[6C[1m[317m[4190m 9/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  8 [m[4m[32mint[m[4m ptyMasterOpen([m[4m[32mchar[m[4m *slaveName,[m[4m[32msize_t[m[4m snLen){                                                                                    [m[2;5H    [32mint[m masterFd,savedErrno;[2;33H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m1[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  7 [m[4m                                                                                                                                    [m[2;5H[32mint[m ptyMasterOpen([32mchar[m *slaveName,[32msize_t[m snLen){[2;53H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  6 [m[4m[35m#include [m[4m[31m<errno.h>[m[4m                                                                                                                  [m[2;5H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  5 [m[4m[35m#include [m[4m[31m<fcntl.h>[m[4m                                                                                                                  [m[2;5H[35m#include [m[31m<errno.h>[m[2;23H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  4 [m[4m[35m#include [m[4m[31m<stdlib.h>[m[4m                                                                                                                 [m[2;5H[35m#include [m[31m<fcntl.h>[m[2;23H[K[31;115H[317m[4190m 8[m[7C[1m[317m[4190m4/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  3 [m[4m[35m#include [m[4m[31m<string.h>[m[4m                                                                                                                 [m[2;5H[35m#include [m[31m<stdlib.h>[m[2;24H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  2 [m[4m[35m#include [m[4m[31m<stdio.h>[m[4m                                                                                                                  [m[2;5H[35m#include [m[31m<string.h>[m[2;24H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  1 [m[4m[35m#define _XOPEN_SOURCE [m[4m[31m500[m[4m                                                                                                           [m[2;5H[35m#include [m[31m<stdio.h>[m[2;23H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[1;5H[?12l[?25h[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[?25l[m[35m#define _XOPEN_SOURCE [m[31m500[m[1;30H[K[2;5H[4m[35m#include [m[4m[31m<stdio.h>[m[4m                                                                                                                  [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[2;5H[?12l[?25h[?25l[m[35m#include [m[31m<stdio.h>[m[2;23H[K[3;5H[4m[35m#include [m[4m[31m<string.h>[m[4m                                                                                                                 [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[3;5H[?12l[?25h[?25l[m[35m#include [m[31m<string.h>[m[3;24H[K[4;5H[4m[35m#include [m[4m[31m<stdlib.h>[m[4m                                                                                                                 [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[4;5H[?12l[?25h[?25l[m[35m#include [m[31m<stdlib.h>[m[4;24H[K[5;5H[4m[35m#include [m[4m[31m<fcntl.h>[m[4m                                                                                                                  [m[31;115H[317m[4190m10[m[7C[1m[317m[4190m5/[5;5H[?12l[?25h[?25l[m[35m#include [m[31m<fcntl.h>[m[5;23H[K[6;5H[4m[35m#include [m[4m[31m<errno.h>[m[4m                                                                                                                  [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[6;5H[?12l[?25h[?25l[m[35m#include [m[31m<errno.h>[m[6;23H[K[7;5H[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[7;5H[?12l[?25h[?25l[m[7;5H[K[8;5H[4m[32mint[m[4m ptyMasterOpen([m[4m[32mchar[m[4m *slaveName,[m[4m[32msize_t[m[4m snLen){                                                                                    [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[8;5H[?12l[?25h[?25l[m[32mint[m ptyMasterOpen([32mchar[m *slaveName,[32msize_t[m snLen){[8;53H[K[9;5H[4m    [m[4m[32mint[m[4m masterFd,savedErrno;                                                                                                        [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m4[9;8H[?12l[?25h[?25l[m    [32mint[m masterFd,savedErrno;[9;33H[K[10;5H[4m    [m[4m[32mchar[m[4m *p;                                                                                                                        [m[31;115H[317m[4190m20[m[6C[1m[317m[4190m10/[10;8H[?12l[?25h[?25l[m    [32mchar[m *p;[10;17H[K[11;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[11;5H[?12l[?25h[?25l[m[11;5H[K[12;5H[4m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);                                                                                     [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m4[12;8H[?12l[?25h[?25l[m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);[12;52H[K[13;5H[4m    [m[4m[33mif[m[4m(masterFd == -[m[4m[31m1[m[4m){                                                                                                             [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[13;8H[?12l[?25h[?25l[m    [33mif[m(masterFd == -[31m1[m){[13;28H[K[14;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[14;8H[?12l[?25h[?25l[m        [33mreturn[m -[31m1[m;[14;23H[K[15;5H[4m    }                                                                                                                               [m[31;115H[317m[4190m30[m[7C[1m[317m[4190m5/[15;8H[?12l[?25h[?25l[m    }[15;10H[K[16;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[m[9C[317m[4190m1[16;5H[?12l[?25h[?25l[m[16;5H[K[17;5H[4m    [m[4m[33mif[m[4m(grantpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m4[17;8H[?12l[?25h[?25l[m    [33mif[m(grantpt(masterFd) == -[31m1[m){[17;37H[K[18;5H[4m        savedErrno = errno;                                                                                                         [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[18;8H[?12l[?25h[?25l[m        savedErrno = errno;[18;32H[K[19;5H[4m        close(masterFd);                                                                                                            [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[19;8H[?12l[?25h[?25l[m        close(masterFd);[19;29H[K[20;5H[4m        errno = savedErrno;                                                                                                         [m[31;115H[317m[4190m40[m[6C[1m[317m[4190m20/[20;8H[?12l[?25h[?25l[m        errno = savedErrno;[20;32H[K[21;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[21;5H[?12l[?25h[?25l[m[21;5H[K[22;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m4[22;8H[?12l[?25h[?25l[m        [33mreturn[m -[31m1[m;[22;23H[K[23;5H[4m    }                                                                                                                               [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[23;8H[?12l[?25h[?25l[m    }[23;10H[K[24;5H[4m                                                                                                                                    [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[m[9C[317m[4190m1[24;5H[?12l[?25h[?25l[m[24;5H[K[25;5H[4m    [m[4m[33mif[m[4m(unlockpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                   [m[31;115H[317m[4190m50[m[7C[1m[317m[4190m5/[m[9C[317m[4190m4[25;8H[?12l[?25h[?25l[m    [33mif[m(unlockpt(masterFd) == -[31m1[m){[25;38H[K[26;5H[4m        savedErrno = errno;                                                                                                         [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[26;8H[?12l[?25h[?25l[m        savedErrno = errno;[26;32H[K[27;5H[4m        close(masterFd);                                                                                                            [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[27;8H[?12l[?25h[?25l[m        close(masterFd);[27;29H[K[28;5H[4m        errno = savedErrno;                                                                                                         [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[28;8H[?12l[?25h[?25l[m        errno = savedErrno;[28;32H[K[29;5H[4m                                                                                                                                    [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m1[29;5H[?12l[?25h[?25l[m[29;5H[K[30;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;115H[317m[4190m60[m[6C[1m[317m[4190m30/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        [33mreturn[m -[31m1[m;[29;23H[K[30;1H[33m 31 [m[4m    }                                                                                                                               [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[29;10H[K[30;1H[33m 32 [m[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 33 [m[4m    [m[4m[33mif[m[4m((p = ptsname(masterFd)) == [m[4m[31mNULL[m[4m){                                                                                            [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    [33mif[m((p = ptsname(masterFd)) == [31mNULL[m){[29;45H[K[30;1H[33m 34 [m[4m        savedErrno = errno;                                                                                                         [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        savedErrno = errno;[29;32H[K[30;1H[33m 35 [m[4m        close(masterFd);                                                                                                            [m[31;115H[317m[4190m70[m[7C[1m[317m[4190m5/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        close(masterFd);[29;29H[K[30;1H[33m 36 [m[4m        errno = savedErrno;                                                                                                         [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        errno = savedErrno;[29;32H[K[30;1H[33m 37 [m[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 38 [m[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        [33mreturn[m -[31m1[m;[29;23H[K[30;1H[33m 39 [m[4m    }                                                                                                                               [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[29;10H[K[30;1H[33m 40 [m[4m                                                                                                                                    [m[31;115H[317m[4190m80[m[6C[1m[317m[4190m40/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 41 [m[4m    [m[4m[33mif[m[4m(strlen(p) < snLen){                                                                                                          [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    [33mif[m(strlen(p) < snLen){[29;31H[K[30;1H[33m 42 [m[4m        strncpy(slaveName,p,snLen);                                                                                                 [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        strncpy(slaveName,p,snLen);[29;40H[K[30;1H[33m 43 [m[4m    }[m[4m[33melse[m[4m{                                                                                                                          [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[33melse[m{[29;15H[K[30;1H[33m 44 [m[4m        close(masterFd);                                                                                                            [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        close(masterFd);[29;29H[K[30;1H[33m 45 [m[4m        errno = EOVERFLOW;                                                                                                          [m[31;115H[317m[4190m90[m[7C[1m[317m[4190m5/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        errno = EOVERFLOW;[29;31H[K[30;1H[33m 46 [m[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        [33mreturn[m -[31m1[m;[29;23H[K[30;1H[33m 47 [m[4m    }                                                                                                                               [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[29;10H[K[30;1H[33m 48 [m[4m                                                                                                                                    [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 49 [m[4m    [m[4m[33mreturn[m[4m masterFd;                                                                                                                [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    [33mreturn[m masterFd;[29;25H[K[30;1H[33m 50 [m[4m}                                                                                                                                   [m[31;114H[317m[4190m100[m[6C[1m[317m[4190m50/[m[9C[317m[4190m1[30;5H[?12l[?25h[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[?25l

[m:[?12l[?25hq[?25l[?12l[?25h[?25l[32;1H[K[32;1H[?1l>[?12l[?25h[?1049l]0;root@localhost:~/TLPI/program64[root@localhost program64]# vim 1-pty_master_open.c
[?1049h[?1h=[2;1H‚ñΩ[6n[2;1H  [1;1H]11;?[1;32r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[32;1H"1-pty_master_open.c" 50L, 774C[>c[1;1H[33m 21 
 22 [8Creturn[m -[31m1[m;
[33m 23 [m    }
[33m 24 
 25 [m    [33mif[m(unlockpt(masterFd) == -[31m1[m){
[33m 26 [m[8CsavedErrno = errno;
[33m 27 [m[8Cclose(masterFd);
[33m 28 [m[8Cerrno = savedErrno;
[33m 29 
 30 [8Creturn[m -[31m1[m;
[33m 31 [m    }
[33m 32 
 33 [m    [33mif[m((p = ptsname(masterFd)) == [31mNULL[m){
[33m 34 [m[8CsavedErrno = errno;
[33m 35 [m[8Cclose(masterFd);
[33m 36 [m[8Cerrno = savedErrno;
[33m 37 
 38 [8Creturn[m -[31m1[m;
[33m 39 [m    }
[33m 40 
 41 [m    [33mif[m(strlen(p) < snLen){
[33m 42 [m[8Cstrncpy(slaveName,p,snLen);
[33m 43 [m    }[33melse[m{
[33m 44 [m[8Cclose(masterFd);
[33m 45 [m[8Cerrno = EOVERFLOW;
[33m 46 [8Creturn[m -[31m1[m;
[33m 47 [m    }
[33m 48 
 49 [m    [33mreturn[m masterFd;
[33m 50 [m[4m}                                                                                                                                   [m[31;1H[317m[4190m [m[1m[317m[4190mNORMAL[m[317m[4190m [m[385m[4234m 1-pty_master_open.c                                                                     c [m[3255m[4238m utf-8[unix] [m[317m[4190m 100% [m[1m[317m[4190m‚ò∞   50/50 „èë[m[317m[4190m :  1 [30;5H[?12l[?25hP+q436f\P+q6b75\P+q6b64\P+q6b72\P+q6b6c\P+q2332\P+q2334\P+q2569\P+q2a37\P+q6b31\[?25l[m[29;5H[4m    [m[4m[33mreturn[m[4m masterFd;                                                                                                                [m[30;5H}[30;6H[K[31;114H[317m[4190m 98[m[6C[1m[317m[4190m49/[m[9C[317m[4190m4[29;8H[?12l[?25h[?25l[m[28;5H[4m                                                                                                                                    [m[29;5H    [33mreturn[m masterFd;[29;25H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m1[28;5H[?12l[?25h[?25l[m[27;5H[4m    }                                                                                                                               [m[28;5H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m4[27;8H[?12l[?25h[?25l[m[26;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[27;5H    }[27;10H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[26;8H[?12l[?25h[?25l[m[25;5H[4m        errno = EOVERFLOW;                                                                                                          [m[26;5H        [33mreturn[m -[31m1[m;[26;23H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[25;8H[?12l[?25h[?25l[m[24;5H[4m        close(masterFd);                                                                                                            [m[25;5H        errno = EOVERFLOW;[25;31H[K[31;115H[317m[4190m88[m[7C[1m[317m[4190m4/[24;8H[?12l[?25h[?25l[m[23;5H[4m    }[m[4m[33melse[m[4m{                                                                                                                          [m[24;5H        close(masterFd);[24;29H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[23;8H[?12l[?25h[?25l[m[22;5H[4m        strncpy(slaveName,p,snLen);                                                                                                 [m[23;5H    }[33melse[m{[23;15H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[22;8H[?12l[?25h[?25l[m[21;5H[4m    [m[4m[33mif[m[4m(strlen(p) < snLen){                                                                                                          [m[22;5H        strncpy(slaveName,p,snLen);[22;40H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[21;8H[?12l[?25h[?25l[m[20;5H[4m                                                                                                                                    [m[21;5H    [33mif[m(strlen(p) < snLen){[21;31H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m0/[m[9C[317m[4190m1[20;5H[?12l[?25h[?25l[m[19;5H[4m    }                                                                                                                               [m[20;5H[K[31;115H[317m[4190m78[m[6C[1m[317m[4190m39/[m[9C[317m[4190m4[19;8H[?12l[?25h[?25l[m[18;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[19;5H    }[19;10H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[18;8H[?12l[?25h[?25l[m[17;5H[4m                                                                                                                                    [m[18;5H        [33mreturn[m -[31m1[m;[18;23H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m1[17;5H[?12l[?25h[?25l[m[16;5H[4m        errno = savedErrno;                                                                                                         [m[17;5H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[m[9C[317m[4190m4[16;8H[?12l[?25h[?25l[m[15;5H[4m        close(masterFd);                                                                                                            [m[16;5H        errno = savedErrno;[16;32H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[15;8H[?12l[?25h[?25l[m[14;5H[4m        savedErrno = errno;                                                                                                         [m[15;5H        close(masterFd);[15;29H[K[31;115H[317m[4190m68[m[7C[1m[317m[4190m4/[14;8H[?12l[?25h[?25l[m[13;5H[4m    [m[4m[33mif[m[4m((p = ptsname(masterFd)) == [m[4m[31mNULL[m[4m){                                                                                            [m[14;5H        savedErrno = errno;[14;32H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[13;8H[?12l[?25h[?25l[m[12;5H[4m                                                                                                                                    [m[13;5H    [33mif[m((p = ptsname(masterFd)) == [31mNULL[m){[13;45H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m1[12;5H[?12l[?25h[?25l[m[11;5H[4m    }                                                                                                                               [m[12;5H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m4[11;8H[?12l[?25h[?25l[m[10;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[11;5H    }[11;10H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m0/[10;8H[?12l[?25h[?25l[m[9;5H[4m                                                                                                                                    [m[10;5H        [33mreturn[m -[31m1[m;[10;23H[K[31;115H[317m[4190m58[m[6C[1m[317m[4190m29/[m[9C[317m[4190m1[9;5H[?12l[?25h[?25l[m[8;5H[4m        errno = savedErrno;                                                                                                         [m[9;5H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m4[8;8H[?12l[?25h[?25l[m[7;5H[4m        close(masterFd);                                                                                                            [m[8;5H        errno = savedErrno;[8;32H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[7;8H[?12l[?25h[?25l[m[6;5H[4m        savedErrno = errno;                                                                                                         [m[7;5H        close(masterFd);[7;29H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[6;8H[?12l[?25h[?25l[m[5;5H[4m    [m[4m[33mif[m[4m(unlockpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                   [m[6;5H        savedErrno = errno;[6;32H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[5;8H[?12l[?25h[?25l[m[4;5H[4m                                                                                                                                    [m[5;5H    [33mif[m(unlockpt(masterFd) == -[31m1[m){[5;38H[K[31;115H[317m[4190m48[m[7C[1m[317m[4190m4/[m[9C[317m[4190m1[4;5H[?12l[?25h[?25l[m[3;5H[4m    }                                                                                                                               [m[4;5H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[m[9C[317m[4190m4[3;8H[?12l[?25h[?25l[m[2;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[3;5H    }[3;10H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[2;8H[?12l[?25h[?25l[m[1;5H[4m                                                                                                                                    [m[2;5H        [33mreturn[m -[31m1[m;[2;23H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 20 [m[4m        errno = savedErrno;                                                                                                         [m[2;5H[K[32;1H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m0/[m[9C[317m[4190m4[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 19 [m[4m        close(masterFd);                                                                                                            [m[2;5H        errno = savedErrno;[2;32H[K[31;115H[317m[4190m38[m[6C[1m[317m[4190m19/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 18 [m[4m        savedErrno = errno;                                                                                                         [m[2;5H        close(masterFd);[2;29H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 17 [m[4m    [m[4m[33mif[m[4m(grantpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                    [m[2;5H        savedErrno = errno;[2;32H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 16 [m[4m                                                                                                                                    [m[2;5H    [33mif[m(grantpt(masterFd) == -[31m1[m){[2;37H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[m[9C[317m[4190m1[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 15 [m[4m    }                                                                                                                               [m[2;5H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[m[9C[317m[4190m4[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 14 [m[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[2;5H    }[2;10H[K[31;115H[317m[4190m28[m[7C[1m[317m[4190m4/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 13 [m[4m    [m[4m[33mif[m[4m(masterFd == -[m[4m[31m1[m[4m){                                                                                                             [m[2;5H        [33mreturn[m -[31m1[m;[2;23H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 12 [m[4m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);                                                                                     [m[2;5H    [33mif[m(masterFd == -[31m1[m){[2;28H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 11 [m[4m                                                                                                                                    [m[2;5H    masterFd = posix_openpt(O_RDWR | O_NOCTTY);[2;52H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m 10 [m[4m    [m[4m[32mchar[m[4m *p;                                                                                                                        [m[2;5H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m0/[m[9C[317m[4190m4[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  9 [m[4m    [m[4m[32mint[m[4m masterFd,savedErrno;                                                                                                        [m[2;5H    [32mchar[m *p;[2;17H[K[31;115H[317m[4190m18[m[6C[1m[317m[4190m 9/[1;8H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  8 [m[4m[32mint[m[4m ptyMasterOpen([m[4m[32mchar[m[4m *slaveName,[m[4m[32msize_t[m[4m snLen){                                                                                    [m[2;5H    [32mint[m masterFd,savedErrno;[2;33H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m1[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  7 [m[4m                                                                                                                                    [m[2;5H[32mint[m ptyMasterOpen([32mchar[m *slaveName,[32msize_t[m snLen){[2;53H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  6 [m[4m[35m#include [m[4m[31m<errno.h>[m[4m                                                                                                                  [m[2;5H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  5 [m[4m[35m#include [m[4m[31m<fcntl.h>[m[4m                                                                                                                  [m[2;5H[35m#include [m[31m<errno.h>[m[2;23H[K[31;116H[317m[4190m0[m[7C[1m[317m[4190m5/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  4 [m[4m[35m#include [m[4m[31m<stdlib.h>[m[4m                                                                                                                 [m[2;5H[35m#include [m[31m<fcntl.h>[m[2;23H[K[31;115H[317m[4190m 8[m[7C[1m[317m[4190m4/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  3 [m[4m[35m#include [m[4m[31m<string.h>[m[4m                                                                                                                 [m[2;5H[35m#include [m[31m<stdlib.h>[m[2;24H[K[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  2 [m[4m[35m#include [m[4m[31m<stdio.h>[m[4m                                                                                                                  [m[2;5H[35m#include [m[31m<string.h>[m[2;24H[K[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[1;5H[?12l[?25h[?25l[1;30r[m[1;1H[L[1;32r[1;1H[33m  1 [m[4m[35m#define _XOPEN_SOURCE [m[4m[31m500[m[4m                                                                                                           [m[2;5H[35m#include [m[31m<stdio.h>[m[2;23H[K[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[1;5H[?12l[?25h[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[1;5H[?25l[m[35m#define _XOPEN_SOURCE [m[31m500[m[1;30H[K[2;5H[4m[35m#include [m[4m[31m<stdio.h>[m[4m                                                                                                                  [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[2;5H[?12l[?25h[?25l[m[35m#include [m[31m<stdio.h>[m[2;23H[K[3;5H[4m[35m#include [m[4m[31m<string.h>[m[4m                                                                                                                 [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[3;5H[?12l[?25h[?25l[m[35m#include [m[31m<string.h>[m[3;24H[K[4;5H[4m[35m#include [m[4m[31m<stdlib.h>[m[4m                                                                                                                 [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[4;5H[?12l[?25h[?25l[m[35m#include [m[31m<stdlib.h>[m[4;24H[K[5;5H[4m[35m#include [m[4m[31m<fcntl.h>[m[4m                                                                                                                  [m[31;115H[317m[4190m10[m[7C[1m[317m[4190m5/[5;5H[?12l[?25h[?25l[m[35m#include [m[31m<fcntl.h>[m[5;23H[K[6;5H[4m[35m#include [m[4m[31m<errno.h>[m[4m                                                                                                                  [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[6;5H[?12l[?25h[?25l[m[35m#include [m[31m<errno.h>[m[6;23H[K[7;5H[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[7;5H[?12l[?25h[?25l[m[7;5H[K[8;5H[4m[32mint[m[4m ptyMasterOpen([m[4m[32mchar[m[4m *slaveName,[m[4m[32msize_t[m[4m snLen){                                                                                    [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[8;5H[?12l[?25h[?25l[m[32mint[m ptyMasterOpen([32mchar[m *slaveName,[32msize_t[m snLen){[8;53H[K[9;5H[4m    [m[4m[32mint[m[4m masterFd,savedErrno;                                                                                                        [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m4[9;8H[?12l[?25h[?25l[m    [32mint[m masterFd,savedErrno;[9;33H[K[10;5H[4m    [m[4m[32mchar[m[4m *p;                                                                                                                        [m[31;115H[317m[4190m20[m[6C[1m[317m[4190m10/[10;8H[?12l[?25h[?25l[m    [32mchar[m *p;[10;17H[K[11;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[11;5H[?12l[?25h[?25l[m[11;5H[K[12;5H[4m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);                                                                                     [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m4[12;8H[?12l[?25h[?25l[m    masterFd = posix_openpt(O_RDWR | O_NOCTTY);[12;52H[K[13;5H[4m    [m[4m[33mif[m[4m(masterFd == -[m[4m[31m1[m[4m){                                                                                                             [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[13;8H[?12l[?25h[?25l[m    [33mif[m(masterFd == -[31m1[m){[13;28H[K[14;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[14;8H[?12l[?25h[?25l[m        [33mreturn[m -[31m1[m;[14;23H[K[15;5H[4m    }                                                                                                                               [m[31;115H[317m[4190m30[m[7C[1m[317m[4190m5/[15;8H[?12l[?25h[?25l[m    }[15;10H[K[16;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[m[9C[317m[4190m1[16;5H[?12l[?25h[?25l[m[16;5H[K[17;5H[4m    [m[4m[33mif[m[4m(grantpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m4[17;8H[?12l[?25h[?25l[m    [33mif[m(grantpt(masterFd) == -[31m1[m){[17;37H[K[18;5H[4m        savedErrno = errno;                                                                                                         [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[18;8H[?12l[?25h[?25l[m        savedErrno = errno;[18;32H[K[19;5H[4m        close(masterFd);                                                                                                            [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[19;8H[?12l[?25h[?25l[m        close(masterFd);[19;29H[K[20;5H[4m        errno = savedErrno;                                                                                                         [m[31;115H[317m[4190m40[m[6C[1m[317m[4190m20/[20;8H[?12l[?25h[?25l[m        errno = savedErrno;[20;32H[K[21;5H[4m                                                                                                                                    [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m1[21;5H[?12l[?25h[?25l[m[21;5H[K[22;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m4[22;8H[?12l[?25h[?25l[m        [33mreturn[m -[31m1[m;[22;23H[K[23;5H[4m    }                                                                                                                               [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[23;8H[?12l[?25h[?25l[m    }[23;10H[K[24;5H[4m                                                                                                                                    [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[m[9C[317m[4190m1[24;5H[?12l[?25h[?25l[m[24;5H[K[25;5H[4m    [m[4m[33mif[m[4m(unlockpt(masterFd) == -[m[4m[31m1[m[4m){                                                                                                   [m[31;115H[317m[4190m50[m[7C[1m[317m[4190m5/[m[9C[317m[4190m4[25;8H[?12l[?25h[?25l[m    [33mif[m(unlockpt(masterFd) == -[31m1[m){[25;38H[K[26;5H[4m        savedErrno = errno;                                                                                                         [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[26;8H[?12l[?25h[?25l[m        savedErrno = errno;[26;32H[K[27;5H[4m        close(masterFd);                                                                                                            [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[27;8H[?12l[?25h[?25l[m        close(masterFd);[27;29H[K[28;5H[4m        errno = savedErrno;                                                                                                         [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[28;8H[?12l[?25h[?25l[m        errno = savedErrno;[28;32H[K[29;5H[4m                                                                                                                                    [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m1[29;5H[?12l[?25h[?25l[m[29;5H[K[30;5H[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;115H[317m[4190m60[m[6C[1m[317m[4190m30/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        [33mreturn[m -[31m1[m;[29;23H[K[30;1H[33m 31 [m[4m    }                                                                                                                               [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[29;10H[K[30;1H[33m 32 [m[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 33 [m[4m    [m[4m[33mif[m[4m((p = ptsname(masterFd)) == [m[4m[31mNULL[m[4m){                                                                                            [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    [33mif[m((p = ptsname(masterFd)) == [31mNULL[m){[29;45H[K[30;1H[33m 34 [m[4m        savedErrno = errno;                                                                                                         [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        savedErrno = errno;[29;32H[K[30;1H[33m 35 [m[4m        close(masterFd);                                                                                                            [m[31;115H[317m[4190m70[m[7C[1m[317m[4190m5/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        close(masterFd);[29;29H[K[30;1H[33m 36 [m[4m        errno = savedErrno;                                                                                                         [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        errno = savedErrno;[29;32H[K[30;1H[33m 37 [m[4m                                                                                                                                    [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 38 [m[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        [33mreturn[m -[31m1[m;[29;23H[K[30;1H[33m 39 [m[4m    }                                                                                                                               [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[29;10H[K[30;1H[33m 40 [m[4m                                                                                                                                    [m[31;115H[317m[4190m80[m[6C[1m[317m[4190m40/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 41 [m[4m    [m[4m[33mif[m[4m(strlen(p) < snLen){                                                                                                          [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m1/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    [33mif[m(strlen(p) < snLen){[29;31H[K[30;1H[33m 42 [m[4m        strncpy(slaveName,p,snLen);                                                                                                 [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m2/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        strncpy(slaveName,p,snLen);[29;40H[K[30;1H[33m 43 [m[4m    }[m[4m[33melse[m[4m{                                                                                                                          [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m3/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[33melse[m{[29;15H[K[30;1H[33m 44 [m[4m        close(masterFd);                                                                                                            [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m4/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        close(masterFd);[29;29H[K[30;1H[33m 45 [m[4m        errno = EOVERFLOW;                                                                                                          [m[31;115H[317m[4190m90[m[7C[1m[317m[4190m5/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        errno = EOVERFLOW;[29;31H[K[30;1H[33m 46 [m[4m        [m[4m[33mreturn[m[4m -[m[4m[31m1[m[4m;                                                                                                                  [m[31;116H[317m[4190m2[m[7C[1m[317m[4190m6/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H        [33mreturn[m -[31m1[m;[29;23H[K[30;1H[33m 47 [m[4m    }                                                                                                                               [m[31;116H[317m[4190m4[m[7C[1m[317m[4190m7/[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    }[29;10H[K[30;1H[33m 48 [m[4m                                                                                                                                    [m[31;116H[317m[4190m6[m[7C[1m[317m[4190m8/[m[9C[317m[4190m1[30;5H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H[K[30;1H[33m 49 [m[4m    [m[4m[33mreturn[m[4m masterFd;                                                                                                                [m[31;116H[317m[4190m8[m[7C[1m[317m[4190m9/[m[9C[317m[4190m4[30;8H[?12l[?25h[?25l[1;30r[m[30;1H
[1;32r[29;5H    [33mreturn[m masterFd;[29;25H[K[30;1H[33m 50 [m[4m}                                                                                                                                   [m[31;114H[317m[4190m100[m[6C[1m[317m[4190m50/[m[9C[317m[4190m1[30;5H[?12l[?25h[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[30;5H[?25l

[m:[?12l[?25hq[?25l[?12l[?25h[?25l[32;1H[K[32;1H[?1l>[?12l[?25h[?1049l]0;root@localhost:~/TLPI/program64[root@localhost program64]# exit
exit
